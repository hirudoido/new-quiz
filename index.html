<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 , bminimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äºŒæŠæ—©æŠ¼ã—ã‚¯ã‚¤ã‚º</title>
    <style>
        /*ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾ç­–*/
        .untouchable {
         touch-action: none;
        }
        .hoge {
        touch-action: pan-y;
        }

       * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }


        .container {
            width: 90%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .rules {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            text-align: left;
            line-height: 1.6;
        }
        
        .rules h3 {
            color: #ffd700;
            margin-bottom: 1rem;
        }
        
        .start-btn1,.start-btn2, .choice-btn {
            border: none;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.8rem 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .start-btn1 {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
        }
        .start-btn2 {
            background: linear-gradient(45deg, #a66bff, #a319de);
            color: white;
        }
        
        .start-btn:hover, .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
        
        .quiz-image {
            width: 100%;
            max-width: 400px;
            max-height: 300px;
            object-fit: cover;
            border-radius: 15px;
            margin: 1rem 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .question {
            font-size: 1.5rem;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .choices {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 0.1rem 0;
        }
        
        .choice-btn {
            flex: 1;
            min-width: 150px;
            max-width: 300px;
            padding: 0.9rem;
            font-size: 1.1rem;
        }
        
        .choice-btn:nth-child(1) {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }
        
        .choice-btn:nth-child(2) {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }
        
        .timer {
            font-size: 1.5rem;
            margin: 1rem 0;
            color: #ffd700;
        }
        
        .score {
            font-size: 1.2rem;
            margin: 1rem 0;
            color: #ffd700;
        }
        
        .progress {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 0.5rem;
            margin: 1rem 0;
        }
        
        .progress-bar {
            background: linear-gradient(45deg, #ffd700, #ffb347);
            height: 10px;
            border-radius: 5px;
            transition: width 0.3s ease;
        }
        
        .result {
            font-size: 1.5rem;
            margin: 1rem 0;
        }
        
        .result.correct {
            color: #4ecdc4;
        }
        
        .result.incorrect {
            color: #ff6b6b;
        }
        
        .final-score {
            font-size: 2rem;
            color: #ffd700;
            margin: 1rem 0;
        }
        
        .countdown {
            font-size: 3rem;
            color: #ffd700;
            margin: 2rem 0;
        }
        
        @media (max-width: 600px) {
            .container {
                width: 95%;
                padding: 1rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .question {
                font-size: 1.2rem;
            }
            
            .choices {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }
            
            .choice-btn {
                width: 100%;
                max-width: 100%;
                min-width: 100%;
                padding: 0.7rem;
                font-size: 1.0rem;
            }
        }
        
        @media (max-width: 480px) {
            .choice-btn {
                padding: 0.65rem;
                font-size: 1rem;
                margin: 0rem ;
            }
            
            .quiz-image {
                max-height: 250px;
            }
                 .question {
                    font-size: 1rem;
                margin: 0;
                padding:0.25;
            }
        }
        
        @media (max-width: 380px) {
            .container {
                padding: 0.5rem;
            }
            
            .choice-btn {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
            .quiz-image {
                width: 75%;
                 vertical-align:top;
                 margin: 0;
             }
             .timer{
                font-size: 1.0rem;
                margin: 0;
                 padding:0.2rem;
             }
            .score {
            margin: 0.2rem 0;
        }
            .progress {
            margin: 0.1rem 0;
        }
        .question{
            padding:0.2rem;
        }

    }
    </style>
</head>
<body>
    <div class="container">
        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div class="screen active" id="startScreen">
            <h1> äºŒæŠæ—©æŠ¼ã—ã‚¯ã‚¤ã‚º</h1>
            <div class="rules">
                <h3>ğŸ“‹ ãƒ«ãƒ¼ãƒ«èª¬æ˜</h3>
                <p>â€¢ ç”»åƒã¨å•é¡ŒãŒ2.5ç§’é–“è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                <p>â€¢ ãã®å¾Œã€é¸æŠè‚¢ã¨åˆ¶é™æ™‚é–“ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
                <p>â€¢ æ—©ãæ­£è§£ã™ã‚‹ã»ã©é«˜å¾—ç‚¹ãŒç²å¾—ã§ãã¾ã™</p>
                <p>â€¢ é–“é•ãˆã‚‹ã¨å¾—ç‚¹ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã‚Šã¾ã™</p>
                <p>â€¢ å…¨å•é¡Œçµ‚äº†å¾Œã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
                <p>â€¢ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã¯7å•ã§çµ‚ã‚ã‚Šã¾ã™</p>
                <p>â€¢ ãƒ•ã‚©ãƒ¼ãƒãƒ«ã‚¹ã‚¿ãƒ¼ãƒˆã¯ç”¨æ„ã—ãŸã™ã¹ã¦å•é¡Œã«å…¨ã¦ç­”ãˆã¦ã‚‚ã‚‰ã„ã¾ã™</p>
                <p>â€¢ ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã ã‹ã‚‰ã‚‚ã—ã‹ã—ãŸã‚‰ã‚³ãƒƒã‚½ãƒªã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã‹ã‚‚</p>
            </div>
            <button class="start-btn1" onclick="startQuiz(1)">ğŸšŒ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <button class="start-btn2" onclick="startQuiz(2)">ğŸšŒ ãƒ•ã‚©ãƒ¼ãƒãƒ«ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        </div>
        
        <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
        <div class="screen" id="quizScreen">
            <div class="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="score">ç¾åœ¨ã®ã‚¹ã‚³ã‚¢: <span id="currentScore">0</span>ç‚¹</div>
            
            <div id="questionDisplay">
                <img class="quiz-image" id="quizImage" src="" alt="ã‚¯ã‚¤ã‚ºç”»åƒ">
                <div class="question" id="questionText"></div>
            </div>
            
            <div class="countdown" id="countdown" style="display: none;">3</div>
            
            <div id="choiceSection" style="display: none;">
                <div class="timer" id="timer">åˆ¶é™æ™‚é–“: <span id="timeLeft">10</span>ç§’</div>
                <div class="choices">
                    <button class="choice-btn" onclick="selectChoice(0)" id="choice0"></button>
                    <button class="choice-btn" onclick="selectChoice(1)" id="choice1"></button>
                </div>
            </div>
            
            <div class="result" id="result" style="display: none;"></div>
        </div>
        
        <!-- çµæœç”»é¢ -->
        <div class="screen" id="resultScreen">
            <h1>ğŸ† ã‚¯ã‚¤ã‚ºçµæœ</h1>
            <div class="final-score" id="finalScore"></div>
            <div id="resultDetails"></div>
            <button class="start-btn1" onclick="restartQuiz()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
        </div>
    </div>

    <script>
        //1
        // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ï¼ˆç”»åƒURLã‚’å®Ÿéš›ã®URLã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼‰
        //const quizData = 
        fetch('./data.json')
          .then(res => res.json())
          .then(data => {
            quizData = data;
            console.log(quizData); // ã“ã“ã§å¤‰æ•°ã«æ ¼ç´ã•ã‚ŒãŸå†…å®¹ãŒè¦‹ã‚‰ã‚Œã‚‹
          });


        let currentQuestion = 0;
        let score = 0;
        let timeLeft = 10;
        let timer;
        let startTime;
        let answers = [];
        let shuffledQuizData = [];
        let currentChoiceOrder = [];
        
        // é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹é–¢æ•°
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function startQuiz(a) {
            document.getElementById('startScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.add('active');
            currentQuestion = 0;
            score = 0;
            answers = [];
            
            // å•é¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            shuffledQuizData = shuffleArray(quizData);
            
            showQuestion();
        }
        
        function showQuestion() {
            if (currentQuestion >= shuffledQuizData.length) {
                showResults();
                return;
            }
            
            const question = shuffledQuizData[currentQuestion];
            document.getElementById('quizImage').src = question.image;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentScore').textContent = score;
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
            const progress = ((currentQuestion + 1) / shuffledQuizData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // å•é¡Œã¨ç”»åƒã‚’è¡¨ç¤º
            document.getElementById('questionDisplay').style.display = 'block';
            document.getElementById('choiceSection').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            
            // 2.5ç§’å¾Œã«é¸æŠè‚¢ã‚’è¡¨ç¤º
            setTimeout(() => {
                showChoices();
            }, 2500);
        }
        
        function showChoices() {
            const question = shuffledQuizData[currentQuestion];
            
            // é¸æŠè‚¢ã®é †ç•ªã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«ã™ã‚‹
            currentChoiceOrder = [0, 1];
            if (Math.random() > 0.5) {
                currentChoiceOrder = [1, 0];
            }
            
            document.getElementById('choice0').textContent = question.choices[currentChoiceOrder[0]];
            document.getElementById('choice1').textContent = question.choices[currentChoiceOrder[1]];
            document.getElementById('choiceSection').style.display = 'block';
            
            // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
            timeLeft = 10;
            startTime = Date.now();
            updateTimer();
            timer = setInterval(updateTimer, 100);
        }
        
        function updateTimer() {
            timeLeft = Math.max(0, 10 - (Date.now() - startTime) / 1000);
            document.getElementById('timeLeft').textContent = Math.ceil(timeLeft);
            
            if (timeLeft <= 0) {
                clearInterval(timer);
                selectChoice(-1); // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
            }
        }
        
        function selectChoice(buttonIndex) {
            clearInterval(timer);
            
            const question = shuffledQuizData[currentQuestion];
            const responseTime = (Date.now() - startTime) / 1000;
            
            // å®Ÿéš›ã«é¸æŠã•ã‚ŒãŸé¸æŠè‚¢ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—
            const actualChoice = currentChoiceOrder[buttonIndex];
            const isCorrect = actualChoice === question.correct;
            
            let pointsEarned = 0;
            
            if (buttonIndex === -1) {
                // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
                pointsEarned = -50;
                document.getElementById('result').textContent = 'â° æ™‚é–“åˆ‡ã‚Œï¼ -50ç‚¹';
                document.getElementById('result').className = 'result incorrect';
            } else if (isCorrect) {
                // æ­£è§£ã®å ´åˆã€æ—©ãç­”ãˆã‚‹ã»ã©é«˜å¾—ç‚¹
                pointsEarned = Math.max(50, Math.floor(150 - responseTime * 10));
                document.getElementById('result').textContent = `âœ… æ­£è§£ï¼ +${pointsEarned}ç‚¹`;
                document.getElementById('result').className = 'result correct';
            } else {
                // ä¸æ­£è§£ã®å ´åˆã€ãƒã‚¤ãƒŠã‚¹ç‚¹
                pointsEarned = Math.min(-50, Math.floor(responseTime * 10-150));
                document.getElementById('result').textContent = `âŒ ä¸æ­£è§£ï¼ ${pointsEarned}ç‚¹`;
                document.getElementById('result').className = 'result incorrect';
            }
            
            score += pointsEarned;
            answers.push({
                question: currentQuestion + 1,
                choice: actualChoice,
                correct: isCorrect,
                responseTime: responseTime,
                points: pointsEarned
            });
            
            document.getElementById('currentScore').textContent = score;
            document.getElementById('result').style.display = 'block';
            document.getElementById('choiceSection').style.display = 'none';
            
            // 2ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸
            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 2000);
        }
        
        function showResults() {
            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            
            document.getElementById('finalScore').textContent = `æœ€çµ‚ã‚¹ã‚³ã‚¢: ${score}ç‚¹`;
            
            let resultText = '';
            let correctCount = 0;
            
            answers.forEach((answer, index) => {
                if (answer.correct) correctCount++;
                resultText += `ç¬¬${answer.question}å•: ${answer.correct ? 'æ­£è§£' : 'ä¸æ­£è§£'} (${answer.points}ç‚¹)\n`;
            });
            
            const accuracy = Math.round((correctCount / shuffledQuizData.length) * 100);
            resultText += `\næ­£è§£ç‡: ${accuracy}%`;
            
            let grade = 'ã‚‚ã†ä¸€åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦æœ€é«˜è¨˜éŒ²ã‚’ç›®æŒ‡ãã†';
            
            document.getElementById('resultDetails').innerHTML = `
                <div style="white-space: pre-line; margin: 1rem 0;">${resultText}</div>
                <div style="font-size: 1.3rem; color: #ffd700; margin: 1rem 0;">${grade}</div>
            `;
        }
        
        function restartQuiz() {
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('startScreen').classList.add('active');
        }
        (".hoge").addEventListener("touchstart", function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, {passive: false});

    </script>
</body>
</html>

